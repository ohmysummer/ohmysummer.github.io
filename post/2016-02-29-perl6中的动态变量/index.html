<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="ohmysummer">
    <meta name="description" content="ohmysummer&#39;s personal website">
    <meta name="keywords" content="Perl6,Rakudo">

    <base href="http://ohmysummer.github.io/">
    <title>
  Perl 6 中的动态变量 · 焉知非鱼
</title>

    <link rel="canonical" href="http://ohmysummer.github.io/post/2016-02-29-perl6%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81%E5%8F%98%E9%87%8F/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.cd087ace86754b082dec94545567f8361cba42e84f8e15edbc4a9f6e52bd1f6a.css" integrity="sha256-zQh6zoZ1Swgt7JRUVWf4Nhy6QuhPjhXtvEqfblK9H2o=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="http://ohmysummer.github.io/css/style.css">
    

    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.49" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://ohmysummer.github.io/">
      焉知非鱼
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/post">博客</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/categories">归档</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/page/about/">关于</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/tags">标签</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Perl 6 中的动态变量</h1>
    </header>

    

<p>Perl 6 中的<a href="http://qiita.com/B73W56H84/items/18053bf37de8bb2bb808#err">动态变量</a></p>

<h2 id="argfiles">$*ARGFILES</h2>

<hr />

<blockquote>
<p>$*ARGFILES Magic command-line input handle.</p>
</blockquote>

<p><strong><code>argfiles.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

$*ARGFILES.perl.say; #=&gt; IO::Handle.new(:path(Any),:chomp)

# 按行读取
for $*ARGFILES.lines -&gt; $line {
    say &quot;$line&quot;;
}

# 一次性读取
# say $*ARGFILES.slurp;
</code></pre>

<p><strong><code>USAGE</code></strong></p>

<pre><code class="language-perl6">$ perl6 argfiles.pl6 file1 file2 file3 ...
</code></pre>

<ul>
<li><a href="http://doc.perl6.org/type/IO::Handle">class IO::Handle - Perl 6 Documentation</a></li>
<li><a href="http://doc.perl6.org/language/io">Input/Output - Perl 6 Documentation</a></li>
<li><a href="http://qiita.com/syohex/items/0a7782920968ab105ba0">Perl6文件操作 - Qiita</a></li>
</ul>

<h2 id="args">@*ARGS</h2>

<hr />

<blockquote>
<p>@*ARGS - Arguments from the command line. 命令行中的参数。</p>
</blockquote>

<p><strong><code>agrs.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say @*ARGS.WAHT;    #=&gt; (Array)
say @*ARGS;         #=&gt; [a b c d e]

say @*ARGS.perl;    #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]
</code></pre>

<p><strong><code>USAGE</code></strong></p>

<pre><code class="language-perl6">$ perl6 args.pl6 a b c d e
</code></pre>

<ul>
<li><a href="http://doc.perl6.org/type/Array">class Array - Perl 6 Documentation</a></li>
</ul>

<h2 id="in">$*IN</h2>

<hr />

<blockquote>
<p>$*IN - 标准输入文件句柄, 等同于 stdin</p>
</blockquote>

<p><strong><code>in.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*IN.perl;   #=&gt; IO::Handle.new(:path(IO::Special.new(what =&gt; &quot;&lt;STDIN&gt;&quot;)),:chomp)
say $*IN.path;   #=&gt; IO::Special.new(what =&gt; &quot;&lt;STDIN&gt;&quot;)
say $*IN.chomp;  #=&gt; True

for $*IN.lines -&gt; $line {
 say &quot;$line&quot;;
}
</code></pre>

<p><strong><code>USAGE</code></strong></p>

<pre><code class="language-perl6">$ perl6 in.pl6
人力
...

$ cat somefile.txt | perl6 in.pl6
</code></pre>

<h2 id="out">$*OUT</h2>

<hr />

<blockquote>
<p>$*OUT - 标准输出文件句柄, 等同于 stdout</p>
</blockquote>

<p><strong><code>out.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*OUT.perl;   #=&gt; IO::Handle.new(:path(IO::Special.new(what =&gt; &quot;&lt;STDOUT&gt;&quot;)),:chomp)
say $*OUT.path;   #=&gt; IO::Special.new(what =&gt; &quot;&lt;STDOUT&gt;&quot;)
say $*OUT.chomp;  #=&gt; True

$*OUT.say( q:to/新年快乐/ );
    祝你新年快乐
    2016.01.23
    让我再说一次
新年快乐

# 通常我们会在打印时省略 $*OUT
# say &quot;哈利路亚&quot;;
</code></pre>

<p>最后一段代码中 <code>//</code> 中间的字符是分割符。这打印出:</p>

<pre><code class="language-txt">祝你新年快乐
2016.01.23
让我再说一次
</code></pre>

<p><strong><code>USAGE</code></strong></p>

<pre><code class="language-perl6">$ perl6 out.pl6
$ perl6 out.pl6 &gt; result.txt
</code></pre>

<ul>
<li><a href="http://doc.perl6.org/type/IO">role IO - Perl 6 Documentation</a></li>
</ul>

<h2 id="err">$*ERR</h2>

<hr />

<blockquote>
<p>$*ERR - 标准错误文件句柄, 等同于 stderr</p>
</blockquote>

<p><strong><code>err.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*ERR.perl;   #=&gt; IO::Handle.new(:path(IO::Special.new(what =&gt; &quot;&lt;STDERR&gt;&quot;)),:chomp)
say $*ERR.path;   #=&gt; IO::Special.new(what =&gt; &quot;&lt;STDERR&gt;&quot;)
say $*ERR.chomp;  #=&gt; True

$*ERR.say(&quot;我错了&quot;);

# 平时可以使用 note
# note &quot;前方高能预警&quot;;
</code></pre>

<p><strong><code>USAGE</code></strong></p>

<pre><code class="language-shell">$ perl6 err.pl6 &gt; /dev/null
我错了
</code></pre>

<h2 id="repo">$*REPO</h2>

<hr />

<blockquote>
<p>$*REPO A variable holding information about modules installed/loaded</p>
</blockquote>

<p><strong><code>repo.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*REPO;
say $*REPO.perl;
say $*REPO.id;
say $*REPO.path-spec;
say $*REPO.loaded;
say $*REPO.repo-chain;

</code></pre>

<h2 id="tz">$*TZ</h2>

<hr />

<blockquote>
<p>$*TZ The system&rsquo;s local timezone.</p>
</blockquote>

<p><strong><code>tz.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*TZ;      #=&gt; 32400
say $*TZ.perl; #=&gt; 32400

say $*TZ.WHAT; #=&gt; (Int)

</code></pre>

<h2 id="cwd">$*CWD</h2>

<hr />

<blockquote>
<p>$*CWD The Current Working Directory.</p>
</blockquote>

<p><strong><code>cwd.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*CWD;       #=&gt; &quot;/Users/kujira&quot;.IO
say $*CWD.path;  #=&gt; /Users/kujira
say $*CWD.perl;  #=&gt; &quot;/Users/kujira&quot;.IO(:SPEC(IO::Spec::Unix),:CWD(&quot;/Users/kujira&quot;))

</code></pre>

<h2 id="kernel">$*KERNEL</h2>

<hr />

<blockquote>
<p>$*KERNEL Which kernel am I compiled for?</p>
</blockquote>

<p><strong><code>kernel.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*KERNEL;            #=&gt; darwin (15.2.0)
say $*KERNEL.release;    #=&gt; Darwin Kernel Version 15.2.0: Fri Nov 13 19:56:56 PST 2015; root:xnu-3248.20.55~2/RELEASE_X86_64
say $*KERNEL.name;       #=&gt; darwin
say $*KERNEL.auth;       #=&gt; unknown
say $*KERNEL.version;    #=&gt; v15.2.0
say $*KERNEL.signature;  #=&gt; (Blob)
say $*KERNEL.desc;       #=&gt; (Str)

say $*KERNEL.perl;        #=&gt; Kernel.new(release =&gt; Str, name =&gt; &quot;darwin&quot;, auth =&gt; &quot;unknown&quot;, version =&gt; Version.new('15.2.0'), signature =&gt; Blob, desc =&gt; Str)
say $*KERNEL.WHAT;        #=&gt; (Kernel)

</code></pre>

<h2 id="distro">$*DISTRO</h2>

<hr />

<blockquote>
<p>$*DISTRO Which OS distribution am I compiling under?</p>
</blockquote>

<p><strong><code>distro.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*DISTRO;           #=&gt; macosx (10.11.2)

say $*DISTRO.name;      #=&gt; macosx
say $*DISTRO.is-win;    #=&gt; False
say $*DISTRO.version;   #=&gt; v10.11.2

say $*DISTRO.path-sep;  #=&gt; :
say $*DISTRO.auth;      #=&gt; Apple Computer, Inc.
say $*DISTRO.desc;      #=&gt; 2016-01-17T01:48:03.261407+09:00
say $*DISTRO.release;   #=&gt; 15C50
say $*DISTRO.signature; #=&gt; (Blob)

say $*DISTRO.gist;      #=&gt; macosx (10.11.2)
say $*DISTRO.Str;       #=&gt; macosx
say $*DISTRO.perl;      #=&gt; Distro.new(release =&gt; &quot;15C50&quot;, is-win =&gt; Bool::False, path-sep =&gt; &quot;:&quot;, name =&gt; &quot;macosx&quot;, auth =&gt; &quot;Apple Computer, Inc.&quot;, version =&gt; Version.new('10.11.2'), signature =&gt; Blob, desc =&gt; &quot;2016-01-17T01:48:47.273804+09:00&quot;)

</code></pre>

<ul>
<li><a href="http://blog.64p.org/entry/2015/09/05/225701">Perl6 で windows かどうか判定したい - tokuhirom&rsquo;s blog</a></li>
<li><a href="https://github.com/perl6/roast/blob/master/S02-magicals/DISTRO.t">DISTRO.t</a></li>
</ul>

<h2 id="vm">$*VM</h2>

<hr />

<blockquote>
<p>$*VM Which virtual machine am I compiling under?</p>
</blockquote>

<p><strong><code>vm.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*VM;         #=&gt; moar (2015.12)

say $*VM.config;
say $*VM.perl;

</code></pre>

<h2 id="perl">$*PERL</h2>

<hr />

<blockquote>
<p>$*PERL Which Perl am I compiled for?</p>
</blockquote>

<p><strong><code>perl.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*PERL;          #=&gt; Perl 6 (6.c)
say $*PERL.compiler; #=&gt; rakudo (2015.12)

say $*PERL.perl;     #=&gt; Perl.new(compiler =&gt; Compiler.new(id =&gt; &quot;AEB5E66886F036F5AF7448E587F49EB233F6F7F5.1451295526.86961&quot;, release =&gt; &quot;&quot;, codename =&gt; &quot;&quot;, name =&gt; &quot;rakudo&quot;, auth =&gt; &quot;The Perl Foundation&quot;, version =&gt; Version.new('2015.12'), signature =&gt; Blob, desc =&gt; Str), name =&gt; &quot;Perl 6&quot;, auth =&gt; &quot;The Perl Foundation&quot;, version =&gt; Version.new('6.c'), signature =&gt; Blob, desc =&gt; Str)

</code></pre>

<h2 id="pid">$*PID</h2>

<hr />

<blockquote>
<p>$*PID Process ID of the current process.</p>
</blockquote>

<p><strong><code>pid.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*PID;      #=&gt; 35480
say $*PID.perl; #=&gt; 35480
say $*PID.WHAT; #=&gt; (Int)

</code></pre>

<h2 id="program-name">$*PROGRAM-NAME</h2>

<hr />

<blockquote>
<p>$*PROGRAM-NAME Path to the current executable as it was entered on the command line, or C&lt;-e&gt; if perl was invoked with the -e flag.</p>
</blockquote>

<p><strong><code>program-name.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*PROGRAM-NAME;
say $*PROGRAM-NAME.perl;
say $*PROGRAM-NAME.IO.basename;

</code></pre>

<h2 id="program">$*PROGRAM</h2>

<hr />

<blockquote>
<p>$*PROGRAM Location (in the form of an C<a href="undefined">IO::Path</a> object) of the Perl program being executed.</p>
</blockquote>

<p><strong><code>program.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*PROGRAM;        #=&gt; &quot;/Users/kujira/program.pl6&quot;.IO
say $*PROGRAM.Str;    #=&gt; program.pl6

say $*PROGRAM.perl;   #=&gt; &quot;program.pl6&quot;.IO(:SPEC(IO::Spec::Unix),:CWD(&quot;/Users/kujira&quot;))

say $*PROGRAM.SPEC;   #=&gt; (Unix)
say $*PROGRAM.CWD;    #=&gt; /Users/kujira

say $*PROGRAM.WHAT;   #=&gt; (Path)

</code></pre>

<h2 id="executable">$*EXECUTABLE</h2>

<hr />

<blockquote>
<p>$*EXECUTABLE Absolute path of the perl executable that is currently running.</p>
</blockquote>

<p><strong><code>executable.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*EXECUTABLE;           #=&gt; &quot;/usr/local/bin/perl6&quot;.IO
say $*EXECUTABLE.Str;       #=&gt; /usr/local/bin/perl6
say $*EXECUTABLE.basename;  #=&gt; perl6

say $*EXECUTABLE.WHAT;      #=&gt; (Path)

say $*EXECUTABLE.perl;      #=&gt; &quot;/usr/local/bin/perl6&quot;.IO(:SPEC(IO::Spec::Unix))
say $*EXECUTABLE.SPEC;      #=&gt; (Unix)

</code></pre>

<h2 id="executable-name">$*EXECUTABLE-NAME</h2>

<hr />

<blockquote>
<p>$*EXECUTABLE-NAME The name of the perl executable that is currently running. (e.g. perl6-p, perl6-m, Niecza.exe) Favor $*EXECUTABLE because it is not guaranteed that the perl executable is in PATH.</p>
</blockquote>

<p><strong><code>executable-name.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*EXECUTABLE-NAME;       #=&gt; perl6
say $*EXECUTABLE-NAME.WHAT;  #=&gt; (Str)

</code></pre>

<h2 id="user">$*USER</h2>

<hr />

<blockquote>
<p>$*USER The user that is running the program. It is an object that evaluates to &ldquo;username (uid)&rdquo;. It will evaluate to the username only if treated as a string and the numeric user id if treated as a number.</p>
</blockquote>

<p><strong><code>user.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*USER;      #=&gt; kujira (801)

say +$*USER;     #=&gt; 801
say ~$*USER;     #=&gt; kujira

say $*USER.perl; #=&gt; IdName.new

</code></pre>

<h2 id="group">$*GROUP</h2>

<hr />

<blockquote>
<p>$*GROUP The primary group of the user who is running the program. It is an object that evaluates to &ldquo;groupname (gid)&rdquo;. It will evaluate to the groupname only if treated as a string and the numeric group id if treated as a number.</p>
</blockquote>

<p><strong><code>group.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*GROUP;       #=&gt; whale (0)

say ~$*GROUP;      #=&gt; whale
say +$*GROUP;      #=&gt; 0

say $*GROUP.perl;  #=&gt; IdName.new

</code></pre>

<h2 id="home">$*HOME</h2>

<hr />

<blockquote>
<p>$*HOME An L<a href="undefined">IO::Path</a> object representing the &ldquo;home directory&rdquo; of the user that is running the program. If the &ldquo;home directory&rdquo; cannot be determined it will be L</p>
</blockquote>

<p><strong><code>home.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*HOME;       #=&gt; &quot;/Users/kujira&quot;.IO

say $*HOME.CWD;   #=&gt; /Users/kujira
say $*HOME.SPEC;  #=&gt; (Unix)
say $*HOME.WHAT;  #=&gt; (Path)

say $*HOME.perl;  #=&gt; &quot;/Users/kujira&quot;.IO(:SPEC(IO::Spec::Unix),:CWD(&quot;/Users/kujira&quot;))

</code></pre>

<ul>
<li><a href="http://doc.perl6.org/type/IO::Path">class IO::Path - Perl 6 Documentation</a></li>
</ul>

<h2 id="spec">$*SPEC</h2>

<hr />

<blockquote>
<p>$*SPEC The appropriate L<a href="undefined">IO::Spec</a> sub-class for the platform that the program is running on.</p>
</blockquote>

<p><strong><code>spec.pl6</code></strong></p>

<pre><code class="language-perl6">use v6;

say $*SPEC;          #=&gt; (Unix)
say $*SPEC.perl;     #=&gt; IO::Spec::Unix
say $*SPEC.path;     #=&gt; (/usr/local/Cellar/rakudo-star/2015.12/share/perl6/site/bin /usr/local/sbin /usr/local/bin /usr/bin /bin /usr/sbin /sbin)
say $*SPEC.tmpdir;   #=&gt; &quot;/var/folders/9v/wr31l2zj78x1nw58jgljq_9w0000gn/T&quot;.IO
say $*SPEC.dir-sep;  #=&gt; /
say $*SPEC.curdir;   #=&gt; .
say $*SPEC.updir;    #=&gt; ..
say $*SPEC.curupdir; #=&gt; none(., ..)
say $*SPEC.rootdir;  #=&gt; /
say $*SPEC.devnull;  #=&gt; /dev/null

</code></pre>

<ul>
<li><a href="http://doc.perl6.org/type/IO::Spec">class IO::Spec - Perl 6 Documentation</a></li>
<li><a href="http://doc.perl6.org/type/IO::Spec::QNX">class IO::Spec::QNX - Perl 6 Documentation</a></li>
<li><a href="http://doc.perl6.org/type/IO::Spec::Unix">class IO::Spec::Unix - Perl 6 Documentation</a></li>
<li><a href="http://doc.perl6.org/type/IO::Spec::Win32">class IO::Spec::Win32 - Perl 6 Documentation</a></li>
<li><a href="http://doc.perl6.org/type/IO::Spec::Cygwin">class IO::Spec::Cygwin - Perl 6 Documentation</a></li>
</ul>

<h2 id="http-qiita-com-b73w56h84-items-18053bf37de8bb2bb808-e5-8f-82-e8-80-83-e3-81-a8-e6-b3-a8-e9-87-88">[](<a href="http://qiita.com/B73W56H84/items/18053bf37de8bb2bb808#%E5%8F%82%E8%80%83%E3%81%A8%E6%B3%A8%E9%87%88">http://qiita.com/B73W56H84/items/18053bf37de8bb2bb808#%E5%8F%82%E8%80%83%E3%81%A8%E6%B3%A8%E9%87%88</a>)</h2>

<hr />

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    
      <p>ohmysummer ❤ Perl 6</p>
    
    
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
