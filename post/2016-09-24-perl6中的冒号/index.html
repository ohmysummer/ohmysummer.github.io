<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="ohmysummer">
    <meta name="description" content="ohmysummer&#39;s personal website">
    <meta name="keywords" content="Perl6,Rakudo">

    <base href="http://ohmysummer.github.io/">
    <title>
  Perl 6 中的冒号 · 焉知非鱼
</title>

    <link rel="canonical" href="http://ohmysummer.github.io/post/2016-09-24-perl6%E4%B8%AD%E7%9A%84%E5%86%92%E5%8F%B7/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.cd087ace86754b082dec94545567f8361cba42e84f8e15edbc4a9f6e52bd1f6a.css" integrity="sha256-zQh6zoZ1Swgt7JRUVWf4Nhy6QuhPjhXtvEqfblK9H2o=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="http://ohmysummer.github.io/css/style.css">
    

    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.49" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://ohmysummer.github.io/">
      焉知非鱼
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/post">博客</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/categories">归档</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/page/about/">关于</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/tags">标签</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Perl 6 中的冒号</h1>
    </header>

    

<h2 id="perl-6-colons">Perl 6 Colons</h2>

<p>在 Perl 6 中到处都是冒号, 我搜集了你在 Perl 6 中使用<a href="https://thelackthereof.org/Perl6_Colons">冒号</a>的所有方式。</p>

<p>Larry 语言再设计第一定律: 每个人都想要冒号
Larry 语言再设计第二定律: Larry 成为冒号</p>

<p>这些都是主题的变体，尤其是“冒号对”语法主题。如果冒号的两种用法看起来不同，或者在不同的用法上下文中不同，即使它们在技术上是相同的，我更愿意说明这两种用法。</p>

<h3 id="命名空间">命名空间</h3>

<pre><code class="language-perl6"># namespace
package A::B { ... }
class   A::B { ... }

# Namespace separator
my $x = A::B.new;

# Dynamic namespace
my $x = ::(&quot;A::B&quot;).new;

# Pseudopackage representing null namespace
say ::;

# Anonymous class
class :: is Int {...}

# Current class in a compile-tiem var
class Who { method myname { say ::?CLASS } }

# Call Int method of Int class
42.Int::Int; # =&gt; 42

# Treat package X as a hash
say X::.keys;
</code></pre>

<h3 id="绑定">绑定</h3>

<pre><code class="language-perl6"># Binding
my $y := $a;

# Read-only binding
my $z ::= $y;

# Container identify
$y =:= $a; # True
</code></pre>

<h3 id="colon-pair-语法">Colon-Pair 语法</h3>

<pre><code class="language-perl6"># Colon-Pair syntax (often seen as adverbs)
my $x = 'cat';
:foo(5)        # 'foo' =&gt; 5
:foo('dog')    # 'foo' =&gt; 'dog'
:foo($x)       # 'foo' =&gt; 'cat'

# Value word quoting, no interpolation
:foo&lt;bar&gt;      # 'foo' =&gt; 'bar'
:foo&lt;bar baz&gt;  # 'foo' =&gt; ('bar', 'baz')
:foo&lt;$x&gt;       # 'foo' =&gt; '$x'

# Value word quoting with interpolation
:foo&lt;&lt;$x&gt;&gt;     # 'foo' =&gt; 'cat'
:foo&lt;&lt;$x dog&gt;&gt; # 'foo' =&gt; ('cat', 'dog')

# Numeric-prefix extraction
say (:73day) # day =&gt; 73

# Default to true value
say (:foo)     # 'foo' =&gt; True
:foo(True)     # 'foo' =&gt; True

# False instead of true
say (:!foo) # foo =&gt; False

# Var name as key, content as value
my @foo=1,2;
:@foo # foo =&gt; [1,2]
:@foo # foo =&gt; [1,2]
:$x   # x   =&gt; 'cat'

# Base conversion via colon-pair
say :16(&quot;dead&quot;) # 57005

# binding pair in sig:
my $a;
sub b (:foo($a)! is rw) { $a = 42};
b(:foo($a));
say $a # 42
</code></pre>

<h3 id="类型">类型</h3>

<pre><code class="language-perl6"># T takes value's type
-&gt; Numeric ::T \x { say T }(42); # =&gt; (Int)

# Type Smileys
Int:D; # Defined Int
Int:U; # Undefined Int
</code></pre>

<h3 id="signature">Signature</h3>

<pre><code class="language-perl6"># signature literal
my $sig = :(Int $foo);

# signature on Callable &amp;var, not yet implemented
my &amp;f:(Str) = -&gt; Str {};
</code></pre>

<h3 id="operators-as-methods">Operators as Methods</h3>

<pre><code class="language-perl6">my $a = 1;
$a.infix:[&quot;+&quot;](3); # $a + 3
$a.infix:&lt;+&gt;(3);   # $a + 3, but shorter with quote brackets
$a.prefix:&lt;++&gt;;    # ++$a
$a.postfix:&lt;++&gt;;   # ++$a
$a.:&lt;++&gt;;          # Shorthand for prefix (no param)
$a.:&lt;+&gt;(3);        # Shorthand for infix (param provided)
</code></pre>

<h3 id="regex">Regex</h3>

<pre><code class="language-perl6"># Regex adverb
:i/a/  # Case insensitive, outside
/:i a/ # Case insensitive, inside

# Declare vars in regex scope
my regex foo { :my $var; }

# Backtracking control
# similar ones not yet implemented are :: ::&gt; :::
/ a: b?: c*: /

# One especially interesting example you often (don't) see is :?
/ .*:? / # explicit minimal match
/ .*? /  # short version that is usually used has no colon

# Unicode character classes
say so &quot;a&quot; ~~ /&lt;[:Alpha]&gt;/
</code></pre>

<h3 id="misc">Misc</h3>

<pre><code class="language-perl6"># Quote adverb
Q:w(word of the day); # :w adverb

# Precedence dropper
@stuff.map({ $_ + 1 }); # Explicit parameter
@stuff.map: { $_ + 1 }; # Parameters come after ':'

# Invocant marker method invocation
$x.say-hi(names =&gt; [&lt;me you&gt;]);  # Normal way
say-hi($x: names =&gt; [&lt;me you&gt;]); # Invocant marker way

# Declare alternative to 'self' for current-instance in method
method wuzzup($this: $name) { say &quot;WUZZUP $name?!&quot; }

# object hashes, ones with complex keys
my $x = :{ (now) =&gt; &quot;when?&quot; };

# longname
sub infix:&lt;ya&gt; { ... }

# Specific uses of longnames
use Foo:from&lt;Perl5&gt;;

# Loop labels
MYLABEL: for ^100 {
  for ^200 {
    last MYLABEL;
  }
}

# Twigil for formal named param for a block (like $^x)
say { $:add ?? $^a + $^b !! $^a - $^b }( 4, 5 ) :!add

# This one is a stretch...
# Colons instead of dashes when you invoke cli commands that use MAIN
sub MAIN ( :$filename ) { ... }

# cmd --filename=file.txt
# cmd :filename=file.txt
# cmd :filename \# filename =&gt; true
</code></pre>

<blockquote>
<p>冒号真是令人惊叹! Awesome.</p>
</blockquote>

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    
      <p>ohmysummer ❤ Perl 6</p>
    
    
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
