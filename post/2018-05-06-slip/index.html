<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="ohmysummer">
    <meta name="description" content="ohmysummer&#39;s personal website">
    <meta name="keywords" content="Perl6,Rakudo">

    <base href="http://ohmysummer.github.io/">
    <title>
  Slip · 焉知非鱼
</title>

    <link rel="canonical" href="http://ohmysummer.github.io/post/2018-05-06-slip/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.cd087ace86754b082dec94545567f8361cba42e84f8e15edbc4a9f6e52bd1f6a.css" integrity="sha256-zQh6zoZ1Swgt7JRUVWf4Nhy6QuhPjhXtvEqfblK9H2o=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="http://ohmysummer.github.io/css/style.css">
    

    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.49" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://ohmysummer.github.io/">
      焉知非鱼
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/post">博客</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/categories">归档</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/page/about/">关于</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/tags">标签</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Slip</h1>
    </header>

    

<p>有时您想要将列表的元素插入到另一个列表中。这可以通过称为 <code>Slip</code> 的特殊类型的列表完成。</p>

<pre><code class="language-perl6">say (1, (2, 3), 4) eqv (1, 2, 3, 4);         # OUTPUT: «False␤» 
say (1, Slip.new(2, 3), 4) eqv (1, 2, 3, 4); # OUTPUT: «True␤» 
say (1, slip(2, 3), 4) eqv (1, 2, 3, 4);     # OUTPUT: «True␤» 
</code></pre>

<p>另一种方法是使用 <code>|</code> 前缀运算符。请注意，这比逗号的优先级更高，因此它只影响单个值，但与上述选项不同，它会打破<a href="https://docs.perl6.org/type/Scalar">标量</a>。</p>

<pre><code class="language-perl6">say (1, |(2, 3), 4) eqv (1, 2, 3, 4);        # OUTPUT: «True␤» 
say (1, |$(2, 3), 4) eqv (1, 2, 3, 4);       # OUTPUT: «True␤» 
say (1, slip($(2, 3)), 4) eqv (1, 2, 3, 4);  # OUTPUT: «False␤» 
</code></pre>

<h1 id="slip-https-docs-perl6-org-type-slip"><a href="https://docs.perl6.org/type/Slip">Slip</a></h1>

<pre><code class="language-perl6">class Slip is List {}
</code></pre>

<p><code>Slip</code> 是一个 <a href="https://docs.perl6.org/type/List">List</a>，自动展平到一个外部列表（或其他类似列表的容器或 iterable）中。</p>

<p>例如，它允许你在不嵌套的情况下编写一个能够在结果中生成多个值的映射：</p>

<pre><code class="language-perl6">say &lt;a b c&gt;.map({ ($_, $_.uc).Slip }).join('|');  # OUTPUT: «a|A|b|B|c|C␤»
</code></pre>

<p>相反，当返回一个普通的 List 时，结果列表是嵌套的：</p>

<pre><code class="language-perl6">say &lt;a b c&gt;.map({ $_, $_.uc }).join('|');        # OUTPUT: «a A|b B|c C␤» 
</code></pre>

<p>要创建一个 <code>Slip</code>, 可以通过调用 <code>Slip</code> 方法或通过使用 <code>slip</code> 子例程来强转为另一个类似列表的类型：</p>

<pre><code class="language-perl6"># This says &quot;1&quot; and then says &quot;2&quot;, rather than saying &quot;(1 2)&quot; 
.say for gather {
    take slip(1, 2);
}
</code></pre>

<p><code>Slip</code> 也可以通过使用 <code>prefix:&lt;|&gt;</code> 运算符创建。<code>|</code> 与 <code>slip</code> 子例程在优先级和单个参数的处理方式上都不同。事实上，<code>prefix:&lt;|&gt;</code> 只接受一个参数，所以它比 <code>slip</code> 子例程更接近 <code>.Slip</code> 方法。</p>

<pre><code class="language-perl6">my $l = (1, 2, 3);
say (1, slip 2, 3).perl;  # says (1, 2, 3)      , slips 2, 3 into (1, …) 
say (0, slip $l).perl;    # says (0, $(1, 2, 3)), $l does not break apart 
say (0, $l.Slip).perl;    # says (0, 1, 2, 3)   , slips from $l into (0, …) 
say (|$l).perl;           # says slip(1, 2, 3)  , breaks apart $l 
say (0, (|$l, 4), 5);     # says (0 (1 2 3 4) 5), slips from $l into (…, 4) 
say (0, ($l.Slip, 4), 5); # says (0 (1 2 3 4) 5), slips from $l into (…, 4) 
say (0, (slip $l, 4), 5); # says (0 (1 2 3) 4 5), slips ($l, 4) into (0, …, 5) 
say (0, ($l, 4).Slip, 5); # says (0 (1 2 3) 4 5), slips ($l, 4) into (0, …, 5) 
</code></pre>

<p>不希望为迭代产生值的循环使用 <code>Slip</code>s，而不是空 <code>List</code>s 来执行，就像不运行块的语句一样。</p>

<p>请注意，<code>prefix:&lt;|&gt;</code> 也会以 slippy 的方式将参数应用于例程调用。它不会将 <code>Slip</code> 转发给所调用的例程，包括 <code>return</code> 和 <code>take</code>。</p>

<pre><code class="language-perl6">my \l = gather for 1..10 -&gt; $a, $b { take |($a, $b) }; say l.perl;
# OUTPUT: «((1, 2), (3, 4), (5, 6), (7, 8), (9, 10)).Seq␤» 
my \m= gather for 1..10 -&gt; $a, $b { take ($a, $b).Slip }; say m.perl;
# OUTPUT: «(1, 2, 3, 4, 5, 6, 7, 8, 9, 10).Seq␤» 
</code></pre>

<h2 id="方法">方法</h2>

<h3 id="slip-方法">slip 方法</h3>

<pre><code class="language-perl6">sub slip(*@ --&gt; Slip:D)
</code></pre>

<p>从它的参数创造一个 <code>Slip</code>。</p>

<h2 id="常量">常量</h2>

<h3 id="empty">Empty</h3>

<p><code>Empty</code> 是空列表的一个 <code>Slip</code>。</p>

<pre><code class="language-perl6">say &quot;&quot;.comb ~~ Empty;
# OUTPUT: «True␤» 
</code></pre>

<h2 id="类型图">类型图</h2>

<p><code>Slip</code> 的类型关系</p>

<p><img src="https://docs.perl6.org/images/type-graph-Slip.svg" alt="img" /></p>

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    
      <p>ohmysummer ❤ Perl 6</p>
    
    
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
