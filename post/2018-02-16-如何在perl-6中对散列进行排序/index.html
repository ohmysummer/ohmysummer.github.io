<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="ohmysummer">
    <meta name="description" content="ohmysummer&#39;s personal website">
    <meta name="keywords" content="Perl6,Rakudo">

    <base href="http://ohmysummer.github.io/">
    <title>
  如何在 Perl 6 中对散列进行排序 · 焉知非鱼
</title>

    <link rel="canonical" href="http://ohmysummer.github.io/post/2018-02-16-%E5%A6%82%E4%BD%95%E5%9C%A8perl-6%E4%B8%AD%E5%AF%B9%E6%95%A3%E5%88%97%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.cd087ace86754b082dec94545567f8361cba42e84f8e15edbc4a9f6e52bd1f6a.css" integrity="sha256-zQh6zoZ1Swgt7JRUVWf4Nhy6QuhPjhXtvEqfblK9H2o=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="http://ohmysummer.github.io/css/style.css">
    

    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://ohmysummer.github.io/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.49" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://ohmysummer.github.io/">
      焉知非鱼
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/post">博客</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/categories">归档</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/page/about/">关于</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/tags">标签</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>如何在 Perl 6 中对散列进行排序</h1>
    </header>

    <p>要在 Perl 6 中对散列进行排序，首先你要知道什么是占位符变量。一旦这个概念变得清晰，对散列排序就变得非常简单。</p>

<p>例如，创建一个不同城市距离莫斯科远近的散列：</p>

<pre><code class="language-perl6">my %distance =
    Владимир    =&gt; 185,
    Волгоград   =&gt; 1000,
    Калининград =&gt; 1227,
    Мурманск    =&gt; 1895,
    Новосибирск =&gt; 3550;
</code></pre>

<p>现在的任务是通过比较距离来对散列进行排序。</p>

<pre><code class="language-perl6">say %distance.sort({$^a.value &lt;=&gt; $^b.value});
</code></pre>

<p>一般来说，它已经准备好了。该程序打印你需要的东西：</p>

<pre><code>(Владимир =&gt; 185 Волгоград =&gt; 1000 Калининград =&gt; 1227 Архангельск =&gt; 1261 Астрахань =&gt; 1411 Мурманск =&gt; 1895 Новосибирск =&gt; 3550)
</code></pre>

<p>让我们看看传递给排序方法的块内发生了什么。</p>

<p>首先，变量 <code>$^a</code> 和 <code>$^b</code> 是占位符，它是匿名块的参数并按字母顺序排序。也就是说，以相同的方式，他们可以被称为 <code>$^x</code> 和 <code>$^y</code> 或 <code>$^var1</code> 和 <code>$^var2</code>。</p>

<p>其次，这些占位符变量内部是 <code>Pair</code> 类型的对象，它包含键和值：</p>

<pre><code class="language-perl6">say %distance.sort({
    say $^a.key ~ ', ' ~ $^a.value ~ ' vs. ' ~
        $^b.key ~ ', ' ~ $^b.value;
    $^a.value &lt;=&gt; $^b.value
});
</code></pre>

<p>通过这种方式，我们可以看到哪些 pair 对儿接收到排序方法：</p>

<pre><code>Владимир, 185 vs. Новосибирск, 3550
Калининград, 1227 vs. Волгоград, 1000
Мурманск, 1895 vs. Астрахань, 1411
Владимир, 185 vs. Волгоград, 1000
Новосибирск, 3550 vs. Волгоград, 1000
Новосибирск, 3550 vs. Калининград, 1227
Астрахань, 1411 vs. Архангельск, 1261
Владимир, 185 vs. Архангельск, 1261
Волгоград, 1000 vs. Архангельск, 1261
Калининград, 1227 vs. Архангельск, 1261
Новосибирск, 3550 vs. Архангельск, 1261
Новосибирск, 3550 vs. Астрахань, 1411
Новосибирск, 3550 vs. Мурманск, 1895
</code></pre>

<p>如果您不想使用占位符，则可以显式声明匿名块的参数并在排序时使用它们：</p>

<pre><code class="language-perl6">say %distance.sort( -&gt; $город1, $город2 {
    $город1.value &lt;=&gt; $город2.value
});
</code></pre>

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    
      <p>ohmysummer ❤ Perl 6</p>
    
    
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
