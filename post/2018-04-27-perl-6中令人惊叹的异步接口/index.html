<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Awesome Async Interfaces with Perl 6</title>
  <meta property="og:title" content="Awesome Async Interfaces with Perl 6" />
  <meta name="twitter:title" content="Awesome Async Interfaces with Perl 6" />
  <meta name="description" content="A tutorial for writing IRC bots with Perl 6">
  <meta property="og:description" content="A tutorial for writing IRC bots with Perl 6">
  <meta name="twitter:description" content="A tutorial for writing IRC bots with Perl 6">
  <meta name="author" content="ç„‰çŸ¥éé±¼"/>
  <link href='https://ohmysummer.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://ohmysummer.github.io/img/rakudo.png" />
  <meta name="twitter:image" content="https://ohmysummer.github.io/img/rakudo.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://ohmysummer.github.io/post/2018-04-27-perl-6%E4%B8%AD%E4%BB%A4%E4%BA%BA%E6%83%8A%E5%8F%B9%E7%9A%84%E5%BC%82%E6%AD%A5%E6%8E%A5%E5%8F%A3/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Rakudo Perl 6" />

  <meta name="generator" content="Hugo 0.53" />
  <link rel="canonical" href="https://ohmysummer.github.io/post/2018-04-27-perl-6%E4%B8%AD%E4%BB%A4%E4%BA%BA%E6%83%8A%E5%8F%B9%E7%9A%84%E5%BC%82%E6%AD%A5%E6%8E%A5%E5%8F%A3/" />
  <link rel="alternate" href="https://ohmysummer.github.io/index.xml" type="application/rss+xml" title="Rakudo Perl 6">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://ohmysummer.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://ohmysummer.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://ohmysummer.github.io/css/codeblock.css" />



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'ohmycloudy', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://ohmysummer.github.io/">Rakudo Perl 6</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="åšå®¢" href="/">åšå®¢</a>
            </li>
          
        
          
            <li>
              <a title="å½’æ¡£" href="/categories">å½’æ¡£</a>
            </li>
          
        
          
            <li>
              <a title="å…³äº" href="/page/about/">å…³äº</a>
            </li>
          
        
          
            <li>
              <a title="æ ‡ç­¾" href="/tags">æ ‡ç­¾</a>
            </li>
          
        

        

        
          <li>
            <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch" style="outline: none;">
              <span class="hidden-sm hidden-md hidden-lg">Search</span> <span id="searchGlyph" class="glyphicon glyphicon-search"></span>
            </a>
          </li>
        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Rakudo Perl 6" href="https://ohmysummer.github.io/">
            <img class="avatar-img" src="https://ohmysummer.github.io/img/rakudo.png" alt="Rakudo Perl 6" />
          </a>
        
      </div>
    </div>

  </div>
</nav>



  <div id="modalSearch" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Search Rakudo Perl 6</h4>
        </div>
        <div class="modal-body">
          <gcse:search></gcse:search>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Awesome Async Interfaces with Perl 6</h1>
                
                  
                    <h2 class="post-subheading">A tutorial for writing IRC bots with Perl 6</h2>
                  
                
                
                  <span class="post-meta">
  
  
  <i class="fa fa-calendar-o"></i>&nbsp; Posted on April 26, 2018
  
  
  &nbsp;|&nbsp;
  <i class="fa fa-clock-o"></i> 6 minutes (1262 words)
  
  
</span>

                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<h1 id="irc-client-perl-6-multi-server-irc-or-awesome-async-interfaces-with-perl-6-https-rakudo-party-post-irc-client-perl-6-multi-server-irc-module"><a href="https://rakudo.party/post/IRC-Client-Perl-6-Multi-Server-IRC-Module">IRC::Client: Perl 6 Multi-Server IRC (or Awesome Async Interfaces with Perl 6)</a></h1>

<p>æˆ‘åœ¨ 2015 å¹´åœ£è¯èŠ‚ç¼–å†™äº†æˆ‘çš„ç¬¬ä¸€ä¸ª Perl 6 ç¨‹åº - ä¸€ä¸ªæ–°å¹´ IRC æ´¾å¯¹æœºå™¨äººå·¥å…·ã€‚è¿™é¡¹å·¥ä½œåŒ…æ‹¬å‘å¸ƒ <a href="https://github.com/zoffixznet/perl6-IRC-Client/">IRC::Client</a> æ¨¡å—. æˆ‘ä»è¿™ä¸ªè¯­è¨€ä¸­æ‰¾åˆ°äº†ç«¥å¹´çš„ä¹è¶£å¹¶ä¸”åœ¨å‡æœŸå–äº†ä¸å°‘é…’, ç»“æœå°±æ˜¯è¿™ä¸ªæ¨¡å—å·®å¼ºäººæ„ã€‚</p>

<p>æœ€è¿‘ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªç”¨äºæŸäº› Perl 6 bug é˜Ÿåˆ—å·¥ä½œçš„å·¥å…·ï¼Œå› æ­¤æˆ‘å†³å®šèŠ±è´¹ä¸€ä¸ªå‘¨æœ«ï¼Œä»å¤´å¼€å§‹é‡æ–°è®¾è®¡å¹¶é‡å†™è¿™ä¸ªæ¨¡å—ã€‚åœ¨è¿‡å»çš„å‡ ä¸ªæœˆä¸­ï¼Œæœ‰å¥½å‡ ä¸ªäººè¯·æ±‚æˆ‘è¿™ä¹ˆåšï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘è¿˜ä¼šå†™ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨è¯¥æ¨¡å—çš„æ•™ç¨‹ - ä½œä¸ºä¸€åä¸»æ‹–å»¶è€…çš„é“æ­‰ã€‚å¦‚æœä½ å¯¹ IRC ä¸æ„Ÿå…´è¶£ï¼Œæˆ‘å¸Œæœ›æœ¬æ•™ç¨‹å°†ä½œä¸º Perl 6 ä¸­å¼‚æ­¥ï¼Œéé˜»å¡æ¥å£çš„ä¸€ä¸ªé€šç”¨ç¤ºä¾‹ã€‚</p>

<h2 id="åŸºç¡€">åŸºç¡€</h2>

<p>è¦åˆ›å»ºä¸€ä¸ª IRC æœºå™¨äººï¼Œå®ä¾‹åŒ–ä¸€ä¸ª <code>IRC::Client</code> å¯¹è±¡ï¼Œç»™å®ƒä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶è°ƒç”¨ <code>.run</code> æ–¹æ³•ã€‚å®ç°æ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºæ–¹æ³•åç§°åŒ¹é…è¦æ”¶å¬çš„äº‹ä»¶çš„ç±»ï¼Œå¹¶é€šè¿‡ <code>.plugins</code> å±æ€§ä¼ é€’ã€‚å½“å‘ç”Ÿ IRC äº‹ä»¶æ—¶ï¼Œå®ƒä¼šæŒ‰ç…§æ‚¨æŒ‡å®šçš„é¡ºåºä¼ é€’ç»™æ‰€æœ‰æ’ä»¶ï¼Œå¦‚æœæŸä¸ªæ’ä»¶è¦æ±‚å®ƒå¤„ç†äº‹ä»¶ï¼Œåˆ™åœæ­¢ã€‚</p>

<p>è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ IRC æœºå™¨äººï¼Œå®ƒå¯ä»¥å“åº”åœ¨é¢‘é“ä¸­å‘é€çš„æ¶ˆæ¯ï¼Œé€šçŸ¥å’Œå‘é€ç»™å®ƒçš„ç§äººæ¶ˆæ¯ã€‚å“åº”æ˜¯ bot æ”¶åˆ°çš„å¤§å†™åŸå§‹æ¶ˆæ¯ï¼š</p>

<pre><code class="language-perl6">use IRC::Client;
.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#perl6&gt;
    :debug
    :plugins(class { method irc-to-me ($_) { .text.uc } })
</code></pre>

<p>ä»¥ä¸‹æ˜¯è¿è¡Œæ—¶æœºå™¨äººçš„è¡¨ç°ï¼š</p>

<pre><code>&lt;Zoffix&gt; MahBot, I â™¥ you!
&lt;MahBot&gt; Zoffix, I â™¥ YOU!
</code></pre>

<p><code>:nick</code>, <code>:host</code> å’Œ <code>:channels</code> æ˜¯æœºå™¨äººçš„æ˜µç§°ã€å®ƒåº”è¯¥è¿æ¥çš„æœåŠ¡å™¨ä»¥åŠå®ƒåº”è¯¥åŠ å…¥çš„é¢‘é“ã€‚<code>:debug</code> æ§åˆ¶è¾“å‡ºæ˜¾ç¤ºå¤šå°‘è°ƒè¯•ã€‚æˆ‘ä»¬åœ¨è¿™å„¿å°†å®ƒçš„å€¼è®¾ç½®ä¸º <code>1</code>ï¼Œä»¥è·å¾—ç¨€ç–çš„è°ƒè¯•è¾“å‡ºï¼Œåªæ˜¯ä¸ºäº†çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆã€‚æç¤ºï¼šå®‰è£…å¯é€‰çš„ <a href="https://modules.perl6.org/repo/Terminal::ANSIColor">Terminal::ANSIColor</a> æ¨¡å—ä»¥ä½¿è°ƒè¯•è¾“å‡ºæ›´å¥½çœ‹ï¼š</p>

<p><img src="https://rakudo.party/assets/pics/irc-bot/debug-output.png" alt="img" /></p>

<p>å¯¹äº.pluginså±æ€§ï¼Œæˆ‘ä»¬æäº¤äº†ä¸€ä¸ªåŒ¿åç±»ã€‚å¦‚æœæ‚¨æœ‰å¤šä¸ªæ’ä»¶ï¼Œåªéœ€æŒ‰ç…§æ‚¨å¸Œæœ›ä»–ä»¬åœ¨ä»¥ä¸‹ä½ç½®æ¥æ”¶äº‹ä»¶çš„é¡ºåºå°†å…¶å…¨éƒ¨æ’å…¥å³å¯ï¼š</p>

<pre><code class="language-perl6">:plugins(PlugFirst.new, PlugSecond.new(:conf), class { ... })
</code></pre>

<p>æˆ‘ä»¬ uppercasing æœºå™¨äººçš„æ’ä»¶ç±»æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºç›‘å¬ <code>irc-to-me</code> äº‹ä»¶ï¼Œæ¯å½“æœºå™¨äººåœ¨é¢‘é“ä¸­å¯»å€æˆ–å‘é€ç§äººæ¶ˆæ¯æˆ–é€šçŸ¥æ—¶è§¦å‘ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š<code>IRC::Client::Message</code> è§’è‰²çš„å¯¹è±¡ä¹‹ä¸€ã€‚æˆ‘ä»¬å°†å®ƒç²˜è´´åˆ° <code>$_</code> topical å˜é‡ä¸­ä»¥èŠ‚çœä¸€äº›è¾“å…¥ã€‚</p>

<p>æˆ‘ä»¬é€šè¿‡è¿”å›è¯¥æ–¹æ³•çš„å€¼æ¥å›å¤è¯¥äº‹ä»¶ã€‚åŸå§‹æ–‡æœ¬åŒ…å«åœ¨æ¶ˆæ¯å¯¹è±¡çš„ <code>.text</code> å±æ€§å†…ï¼Œå› æ­¤æˆ‘ä»¬å°†è°ƒç”¨ <code>.uc</code> æ–¹æ³•æ¥ä½¿å†…å®¹æˆä¸ºå¤§å†™ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ç­”å¤ã€‚</p>

<p>å°±åƒæˆ‘ä»¬çš„ uppercasing æœºå™¨äººä¸€æ ·æ£’ï¼Œå®ƒå’Œæåœ°è€ƒå¯Ÿä¸­çš„ç©ºè°ƒä¸€æ ·æœ‰ç”¨ã€‚è®©æˆ‘ä»¬æ•™ä¸€äº›æŠ€å·§ã€‚</p>

<h2 id="å˜å¾—æ›´èªæ˜">å˜å¾—æ›´èªæ˜</h2>

<p>æˆ‘ä»¬å°†è°ƒç”¨æˆ‘ä»¬çš„æ–°æ’ä»¶ <code>Trickster</code>ï¼Œå®ƒä¼šå“åº”å‘½ä»¤ <code>time</code> - è¿™ä¼šç»™å‡ºå½“åœ°æ—¶é—´å’Œæ—¥æœŸ - ä»¥åŠ <code>temp</code> - å°†æ¸©åº¦åœ¨åæ°æ¸©åº¦å’Œæ‘„æ°æ¸©åº¦ä¹‹é—´è½¬æ¢ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code class="language-perl6">use IRC::Client;

class Trickster {
    method irc-to-me ($_) {
        given .text {
            when /time/ { DateTime.now }
            when /temp \s+ $&lt;temp&gt;=\d+ $&lt;unit&gt;=[F|C]/ {
                when $&lt;unit&gt; eq 'F' { &quot;That's {($&lt;temp&gt; - 32) Ã— .5556}Â°C&quot; }
                default             { &quot;That's { $&lt;temp&gt; Ã— 1.8 + 32   }Â°F&quot; }
            }
            'huh?'
        }
    }
}

.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#perl6&gt;
    :debug
    :plugins(Trickster)
</code></pre>

<pre><code>&lt;Zoffix&gt; MahBot, time
&lt;MahBot&gt; Zoffix, 2016-07-23T19:00:15.795551-04:00
&lt;Zoffix&gt; MahBot, temp 42F
&lt;MahBot&gt; Zoffix, That's 5.556Â°C
&lt;Zoffix&gt; MahBot, temp 42C
&lt;MahBot&gt; Zoffix, That's 107.6Â°F
&lt;Zoffix&gt; MahBot, I â™¥ you!
&lt;MahBot&gt; Zoffix, huh?
</code></pre>

<p>ä»£ç å¾ˆç®€å•ï¼šæˆ‘ä»¬å°†ç»™å®šçš„æ–‡æœ¬ä¼ é€’ç»™å‡ ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœå®ƒåŒ…å«å•è¯ <code>time</code>ï¼Œæˆ‘ä»¬ä¼šè¿”å›å½“å‰æ—¶é—´ã€‚å¦‚æœå®ƒåŒ…å« <code>temp</code>ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ç»™å®šçš„æ•°å­—æ˜¯ç”± F è¿˜æ˜¯ C åç¼€æ¥åšé€‚å½“çš„æ•°å­¦è¿ç®—ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…å‘ç”Ÿï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šè¿”å›å¥½å¥‡çš„ <code>huh?</code>ã€‚</p>

<p>è¿™ä¸ªæ–°çš„å’Œæ”¹è¿›çš„æ’ä»¶å­˜åœ¨ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼šæœºå™¨äººä¸å†å–œæ¬¢æˆ‘ï¼è™½ç„¶æˆ‘ä¼šå¹¸å…äºéš¾ï¼Œä½†æˆ‘æ€€ç–‘ä»»ä½•å…¶ä»–æ’ä»¶éƒ½ä¼šæ•™å¯¼æœºå™¨äººå†æ¬¡çˆ±ä¸Šå®ƒï¼Œå› ä¸ºå°½ç®¡ <code>Trickster</code> è¯†åˆ«ä¸äº†å®ƒèƒ½å¤„ç†çš„ä»»ä½•å‘½ä»¤ï¼Œä½†å®ƒä¼šæ¶ˆè€—æ‰€æœ‰çš„ <code>irc-to-me</code> äº‹ä»¶ã€‚è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼</p>

<h2 id="passing-the-buck">Passing The Buck</h2>

<p>æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å€¼å¯ä»¥è¢«äº‹ä»¶å¤„ç†ç¨‹åºè¿”å›æ¥è¡¨ç¤ºå®ƒæ²¡æœ‰å¤„ç†äº‹ä»¶ï¼Œå¹¶ä¸”å®ƒåº”è¯¥è¢«ä¼ æ’­åˆ°æ›´å¤šçš„æ’ä»¶å’Œäº‹ä»¶å¤„ç†ç¨‹åºã€‚è¯¥å€¼ç”± <code>IRC::Client::Plugin</code> è§’è‰²æä¾›çš„ <code>.NEXT</code> å±æ€§æä¾›ï¼Œæ’ä»¶å¯ä»¥ <code>does</code> è·å–è¯¥å±æ€§ã€‚å½“æ‚¨ä½¿ç”¨ <code>IRC::Client</code> æ—¶ï¼Œè¯¥è§’è‰²ä¼šè‡ªåŠ¨å¯¼å‡ºã€‚</p>

<p>è®©æˆ‘ä»¬çœ‹çœ‹åˆ©ç”¨è¿™ä¸ªç‰¹æ®Šå€¼çš„ä¸€äº›ä»£ç ã€‚è¯·æ³¨æ„ï¼Œç”±äº <code>.NEXT</code> æ˜¯ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ç±»å‹å¯¹è±¡ä¸ŠæŸ¥æ‰¾å±æ€§ï¼Œå› æ­¤æ‚¨éœ€è¦æ‰§è¡Œé¢å¤–çš„æ­¥éª¤å¹¶åœ¨å°†æ’ä»¶ç±»æä¾›ç»™æ’ä»¶æ—¶è¿›è¡Œå®ä¾‹åŒ–ã€‚</p>

<pre><code class="language-perl6">use IRC::Client;

class Trickster does IRC::Client::Plugin {
    method irc-to-me ($_) {
        given .text {
            when /time/ { DateTime.now }
            when /temp \s+ $&lt;temp&gt;=\d+ $&lt;unit&gt;=[F|C]/ {
                when $&lt;unit&gt; eq 'F' { &quot;That's {($&lt;temp&gt; - 32) Ã— .5556}Â°C&quot; }
                default             { &quot;That's { $&lt;temp&gt; Ã— 1.8 + 32   }Â°F&quot; }
            }
            $.NEXT;
        }
    }
}

class BFF does IRC::Client::Plugin {
    method irc-to-me ($_) {
        when .text ~~ /'â™¥'/ { 'I â™¥ YOU!' };
        $.NEXT;
    }
}

.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#perl6&gt;
    :debug
    :plugins(Trickster.new, BFF.new)
</code></pre>

<pre><code>&lt;Zoffix&gt; MahBot, time
&lt;MahBot&gt; Zoffix, 2016-07-23T19:37:45.788272-04:00
&lt;Zoffix&gt; MahBot, temp 42F
&lt;MahBot&gt; Zoffix, That's 5.556Â°C
&lt;Zoffix&gt; MahBot, temp 42C
&lt;MahBot&gt; Zoffix, That's 107.6Â°F
&lt;Zoffix&gt; MahBot, I â™¥ you!
&lt;MahBot&gt; Zoffix, I â™¥ YOU!
</code></pre>

<p>æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªæ’ä»¶éƒ½è®¢é˜… <code>irc-to-me</code> äº‹ä»¶ã€‚ <code>:plugins</code> å±æ€§é¦–å…ˆæ¥æ”¶ <code>Trickster</code> æ’ä»¶ï¼Œå› æ­¤å®ƒçš„äº‹ä»¶å¤„ç†ç¨‹åºå°†é¦–å…ˆè¿è¡Œã€‚å¦‚æœæ”¶åˆ°çš„æ–‡æœ¬ä¸ <code>Trickster</code> çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½ä¸åŒ¹é…ï¼Œå®ƒå°†ä»è¯¥æ–¹æ³•è¿”å› <code>$.NEXT</code>ã€‚</p>

<p>è¿™æ ‡å¿—ç€å®¢æˆ·ç«¯å¯¹è±¡å»å¯»æ‰¾å…¶ä»–å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥å®ƒå¾—åˆ° <code>BFF</code> çš„ <code>irc-to-me</code> å¤„ç†ç¨‹åºã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å›å¤è¾“å…¥æ˜¯å¦åŒ…å«çˆ±å¿ƒï¼Œå¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨è¿™é‡Œå…ˆå‘åˆ¶äººåœ°è¿”å› <code>$.NEXT</code>ã€‚</p>

<p>å½“æœºå™¨äººæ¢å¤äº†æ™´æœ—çš„è¡¨æƒ…æ—¶ï¼Œå®ƒçš„ä»£ä»·æ˜¯ç›¸å½“å¤šçš„é¢å¤–æ‰“å­—ã€‚æˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<h2 id="å¤šç§æ‰€æœ‰çš„ä¸œè¥¿">å¤šç§æ‰€æœ‰çš„ä¸œè¥¿ï¼</h2>

<p>Perl 6 æ”¯æŒå¤šé‡åˆ†æ´¾ä»¥åŠç­¾åä¸­çš„ç±»å‹çº¦æŸã€‚æœ€é‡è¦çš„æ˜¯ï¼Œé’ˆå¯¹å…·æœ‰ <code>.text</code> å±æ€§çš„ <code>IRC::Client</code> æ¶ˆæ¯å¯¹è±¡çš„ smartmatch ä½¿ç”¨è¯¥å±æ€§çš„å€¼ã€‚ç»“åˆæ‰€æœ‰è¿™ä¸‰é¡¹åŠŸèƒ½ï¼Œæ‚¨æœ€ç»ˆå¾—å‡ºçš„ä»£ç éå¸¸ç®€æ´ï¼š</p>

<pre><code class="language-perl6">use IRC::Client;
class Trickster {
    multi method irc-to-me ($ where /time/) { DateTime.now }
    multi method irc-to-me ($ where /temp \s+ $&lt;temp&gt;=\d+ $&lt;unit&gt;=[F|C]/) {
        $&lt;unit&gt; eq 'F' ?? &quot;That's {($&lt;temp&gt; - 32) Ã— .5556}Â°C&quot;
                       !! &quot;That's { $&lt;temp&gt; Ã— 1.8 + 32   }Â°F&quot;
    }
}

class BFF { method irc-to-me ($ where /'â™¥'/) { 'I â™¥ YOU!' } }

.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#perl6&gt;
    :debug
    :plugins(Trickster, BFF)
</code></pre>

<pre><code>&lt;Zoffix&gt; MahBot, time
&lt;MahBot&gt; Zoffix, 2016-07-23T19:59:44.481553-04:00
&lt;Zoffix&gt; MahBot, temp 42F
&lt;MahBot&gt; Zoffix, That's 5.556Â°C
&lt;Zoffix&gt; MahBot, temp 42C
&lt;MahBot&gt; Zoffix, That's 107.6Â°F
&lt;Zoffix&gt; MahBot, I â™¥ you!
&lt;MahBot&gt; Zoffix, I â™¥ YOU!
</code></pre>

<p>åœ¨ç­¾åä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦æ¶ˆæ¯å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å…¶ä½ç½®ä½¿ç”¨åŒ¿å <code>$</code> å‚æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¥<a href="https://perl6.party/post/Perl-6-Types--Made-for-Humans#subsets:tailor-madetypes">çº¦æŸ</a>è¯¥å‚æ•°ï¼Œå› æ­¤åªæœ‰åœ¨æ¶ˆæ¯æ–‡æœ¬ä¸è¯¥æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ—¶æ‰ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ç”±äºåœ¨å¤±è´¥çš„åŒ¹é…ä¸­ä¸ä¼šè°ƒç”¨ä»»ä½•æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬ä¸å†éœ€è¦æ··æ·†æ•´ä¸ª <code>$.NEXT</code> ä¸šåŠ¡æˆ–å°†ä»»ä½•è§’è‰²ç»„åˆåˆ°æˆ‘ä»¬çš„æ’ä»¶ä¸­ã€‚</p>

<p>æˆ‘ä»¬æ–¹æ³•çš„ä¸»ä½“æ¯ä¸ªéƒ½æœ‰ä¸€ä¸ªç”Ÿæˆäº‹ä»¶å“åº”å€¼çš„è¯­å¥ã€‚åœ¨æ¸©åº¦è½¬æ¢å™¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦æ ¹æ®è¦æ±‚çš„å•ä½é€‰æ‹©è¦ç”¨äºè½¬æ¢çš„å…¬å¼ï¼Œæ˜¯çš„ï¼Œç­¾åç±»å‹çº¦æŸåŒ¹é…ä¸­åˆ›å»ºçš„ <code>$&lt;unit&gt;</code> å’Œ <code>$&lt;temp&gt;</code> æ•è·å¯ç”¨äºè¯¥æ–¹æ³•çš„ä¸»ä½“ã€‚</p>

<h2 id="ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„ä¸€å¤©">ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„ä¸€å¤©</h2>

<p>é™¤äº†æ ‡å‡†çš„å‘½åå’Œæ•°å­— IRC åè®®äº‹ä»¶å¤–ï¼Œ<code>IRC::Client</code> è¿˜æä¾›ä¾¿åˆ©äº‹ä»¶ã€‚å…¶ä¸­ä¹‹ä¸€æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼š<code>irc-to-me</code> äº‹ä»¶ã€‚è¿™æ ·çš„äº‹ä»¶æ˜¯åˆ†å±‚çš„ï¼Œæ‰€ä»¥ä¸€ä¸ª IRC äº‹ä»¶å¯ä»¥è§¦å‘å‡ ä¸ª <code>IRC::Client</code> çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰äººåœ¨æˆ‘ä»¬çš„é¢‘é“ä¸­è®¿é—®æˆ‘ä»¬çš„æœºå™¨äººï¼Œåˆ™ä¼šè§¦å‘ä»¥ä¸‹äº‹ä»¶é“¾ï¼š</p>

<pre><code>irc-addressed  â–¶  irc-to-me  â–¶  irc-privmsg-channel  â–¶  irc-privmsg  â–¶  irc-all
</code></pre>

<p>äº‹ä»¶ä»â€œæœ€çª„â€åˆ°â€œæœ€å®½â€æ’åˆ—ï¼šåªæœ‰åœ¨æˆ‘ä»¬çš„æœºå™¨äººè¢«è®¿é—®æ—¶ï¼Œæ‰å¯ä»¥è§¦å‘ <code>irc-addressed</code>ã€‚ <code>irc-to-me</code> ä¹Ÿå¯ä»¥é€šè¿‡é€šçŸ¥å’Œç§ä¿¡è§¦å‘ï¼Œæ‰€ä»¥å®ƒæ›´å®½; <code>irc-privmsg-channel</code> åŒ…å«æ‰€æœ‰é¢‘é“æ¶ˆæ¯ï¼Œæ‰€ä»¥å®ƒä»ç„¶æ›´å®½;è€Œ <code>irc-privmsg</code> ä¹ŸåŒ…å«ç§äººä¿¡æ¯ç»™æˆ‘ä»¬çš„æœºå™¨äººã€‚è¿™æ¡é“¾æœ€ç»ˆä»¥å®ƒä»¬æœ€å¹¿æ³›çš„äº‹ä»¶ç»“æŸï¼š<code>irc-all</code>ã€‚</p>

<p>å¦‚æœæ’ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºè¿”å›é™¤ <code>$.NEXT</code> ä»¥å¤–çš„ä»»ä½•å€¼ï¼Œåˆ™äº‹ä»¶é“¾ä¸­çš„åç»­äº‹ä»¶å°†ä¸ä¼šè¢«è§¦å‘ï¼Œå°±åƒåé¢çš„æ’ä»¶é“¾ä¸­çš„æ’ä»¶ä¸ä¼šå› ä¸ºç›¸åŒçš„åŸå› è€Œè¢«å°è¯•ä¸€æ ·ã€‚åœ¨å°è¯•å¤„ç†æ›´å¹¿æ³›çš„äº‹ä»¶ä¹‹å‰ï¼Œæ‰€æœ‰æ’ä»¶éƒ½ä¼šå°è¯•æ¯ä¸ªäº‹ä»¶ã€‚</p>

<p>é€šè¿‡å°† <code>:debug</code> å±æ€§è®¾ç½®ä¸º 3 çº§æˆ–æ›´é«˜çº§åˆ«ï¼Œæ‚¨å°†åœ¨è°ƒè¯•è¾“å‡ºä¸­è·å¾—å‘å°„äº‹ä»¶ã€‚è¿™æ˜¯æˆ‘ä»¬çš„æœºå™¨äººè¯•å›¾å¤„ç†æœªçŸ¥çš„å‘½ä»¤ <code>blarg</code>ï¼Œç„¶åå¤„ç†æˆ‘ä»¬å®šä¹‰çš„ <code>irc-to-me</code> äº‹ä»¶å¤„ç†ç¨‹åºå¤„ç†çš„å‘½ä»¤ <code>time</code>ï¼š</p>

<p><img src="https://rakudo.party/assets/pics/irc-bot/debug-output2.png" alt="img" /></p>

<p>æ‰€æœ‰çš„ <code>IRC::Client</code> äº‹ä»¶éƒ½æœ‰ <code>irc-</code> å‰ç¼€ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ä½ çš„æ’ä»¶ä¸­è‡ªç”±å®šä¹‰è¾…åŠ©æ–¹æ³•ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¸äº‹ä»¶å¤„ç†ç¨‹åºå‘ç”Ÿå†²çªã€‚è¯´åˆ°å‘å°„ä½“&hellip;&hellip;</p>

<h2 id="keep-em-commin">Keep &lsquo;Em Commin&rsquo;</h2>

<p>å“åº”å‘½ä»¤æ˜¯ç”œèœœçš„ï¼Œæ‰€æœ‰çš„ï¼Œä½†è®¸å¤šæœºå™¨äººå¯èƒ½ä¼šæƒ³è‡ªå·±çš„æ„å¿—äº§ç”Ÿä¸€äº›è¾“å‡ºã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåƒµå°¸ç¨‹åºï¼Œå½“æˆ‘ä»¬æœ‰æœªè¯»çš„ GitHub é€šçŸ¥æ—¶ï¼Œå®ƒä¼šæ¥çƒ¦æˆ‘ä»¬ï¼</p>

<pre><code class="language-perl6">use IRC::Client;
use HTTP::Tinyish;
use JSON::Fast;

class GitHub::Notifications does IRC::Client::Plugin {
    has Str  $.token  = %*ENV&lt;GITHUB_TOKEN&gt;;
    has      $!ua     = HTTP::Tinyish.new;
    constant $API_URL = 'https://api.github.com/notifications';

    method irc-connected ($) {
        start react {
            whenever self!notification.grep(* &gt; 0) -&gt; $num {
                $.irc.send: :where&lt;Zoffix&gt;
                            :text(&quot;You have $num unread notifications!&quot;)
                            :notice;
            }
        }
    }

    method !notification {
        supply {
            loop {
                my $res = $!ua.get: $API_URL, :headers{ :Authorization(&quot;token $!token&quot;) };
                $res&lt;success&gt; and emit +grep *.&lt;unread&gt;, |from-json $res&lt;content&gt;;
                sleep $res&lt;headers&gt;&lt;X-Poll-Interval&gt; || 60;
            }
        }
    }
}

.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#perl6&gt;
    :debug
    :plugins(GitHub::Notifications.new)
</code></pre>

<pre><code>[00:25:41] -MahBot- Zoffix, You have 20 unread notifications!
[00:26:41] -MahBot- Zoffix, You have 19 unread notifications!
</code></pre>

<p>æˆ‘ä»¬åˆ›å»ºäº† <code>does</code> <code>IRC::Client::Plugin</code> è§’è‰²çš„ <code>GitHub::Notifications</code> ç±»ã€‚è¯¥è§’è‰²ä¸ºæˆ‘ä»¬æä¾›äº† <code>$.irc</code> å±æ€§ï¼Œè¿™æ˜¯æˆ‘ä»¬å°†ç”¨äºåœ¨ IRC ä¸Šå‘æˆ‘ä»¬å‘é€æ¶ˆæ¯çš„ <code>IRC::Client</code> å¯¹è±¡ã€‚</p>

<p>é™¤äº† <code>irc-connected</code> æ–¹æ³•å¤–ï¼Œè¯¥ç±»ä¸å…¶ä»–ç±»ç›¸ä¼¼ï¼šç”¨äºæˆ‘ä»¬çš„ GitHub API token çš„å…¬å…± <code>$.token</code> å±æ€§ï¼Œç”¨äºä¿ç•™ HTTP User Agent å¯¹è±¡çš„ç§æœ‰ <code>$!ua</code> å±æ€§ä»¥åŠç§æœ‰ <code>notification</code> æ–¹æ³•ï¼Œé‚£å„¿æ˜¯æ‰€æœ‰è¡ŒåŠ¨å‘ç”Ÿçš„åœ°æ–¹ã€‚</p>

<p>åœ¨ <code>notification</code> å†…éƒ¨ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <a href="https://docs.perl6.org/type/Supply">Supply</a>ï¼Œå®ƒå°†å‘å‡ºæˆ‘ä»¬æ‹¥æœ‰çš„æœªè¯»é€šçŸ¥çš„æ•°é‡ã€‚å®ƒé€šè¿‡ä½¿ç”¨ <a href="https://modules.perl6.org/repo/HTTP::Tinyish">HTTP::Tinyish</a> å¯¹è±¡æ¥è®¿é—® GitHub API ç«¯ç‚¹ã€‚åœ¨ç¬¬ 24 è¡Œï¼Œå®ƒè§£ææˆåŠŸè¯·æ±‚è¿”å›çš„ JSONï¼Œå¹¶ä¸”å°†ä»»ä½• <code>unread</code> å±æ€§è®¾ç½®ä¸º <code>true</code> çš„é¡¹ç›®çš„æ¶ˆæ¯åˆ—è¡¨ä½œä¸ºgrepã€‚å‰ç¼€ <code>+</code> è¿ç®—ç¬¦å°†åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ª <code>Int</code>ï¼Œå®ƒæ˜¯æ‰¾åˆ°çš„æ€»é¡¹ç›®ï¼Œè¿™æ˜¯æˆ‘ä»¬ä» supply ä¸­ <code>emit</code> çš„å†…å®¹ã€‚</p>

<p>å½“æˆ‘ä»¬æˆåŠŸè¿æ¥åˆ° IRC æœåŠ¡å™¨æ—¶ï¼Œä¼šè§¦å‘ <code>irc-connected</code> çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹(<code>start</code>)ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå½“æˆ‘ä»¬æ”¶åˆ°é€šçŸ¥æ–¹æ³•ç»™å‡ºçš„å½“å‰æœªè¯»æ¶ˆæ¯æ•°æ—¶ï¼Œå°±ä¼šä½œå‡ºååº”ã€‚ç”±äºæˆ‘ä»¬åªå…³æ³¨é‚£äº›æˆ‘ä»¬ç¡®å®æœ‰æœªè¯»ä¿¡æ¯çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨ä¾›åº”æ–¹é¢å‘å‡ºè­¦å‘Šï¼Œåœ¨æ²¡æœ‰ä»»ä½•ä¿¡æ¯çš„æƒ…å†µä¸‹è¿‡æ»¤æ‰è¿™äº›æƒ…å†µï¼ˆæ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…é¦–å…ˆå‘å¸ƒè¿™äº›ä¿¡æ¯ï¼Œä½†æˆ‘ä¼šåœ¨è¿™é‡Œç‚«è€€ Perl 6 ğŸ˜¸ï¼‰ã€‚ä¸€æ—¦æˆ‘ä»¬ç¡®å®æœ‰æœªè¯»æ¶ˆæ¯ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨ <code>IRC::Client</code> çš„ <code>.send</code> æ–¹æ³•ï¼Œè¦æ±‚å®ƒå‘æˆ‘ä»¬å‘é€ä¸€æ¡ IRC é€šçŸ¥ï¼Œå…¶ä¸­åŒ…å«æœªè¯»æ¶ˆæ¯çš„æ€»æ•°ã€‚çœŸçš„å¤ªæ£’äº†ï¼</p>

<h2 id="ä¸è¦ç­‰å¾…">ä¸è¦ç­‰å¾…</h2>

<p>æˆ‘ä»¬ä»‹ç»äº†æˆ‘ä»¬å‘é€ç»™ IRC çš„å¼‚æ­¥æ•°æ®æä¾›æˆ–è€…æˆ‘ä»¬ç«‹å³å›å¤å‘½ä»¤çš„æƒ…å†µã€‚æœºå™¨äººå‘½ä»¤èŠ±è´¹ä¸€äº›æ—¶é—´æ¥æ‰§è¡Œå¹¶ä¸ç½•è§ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æœºå™¨äººåœ¨å‘½ä»¤æ‰§è¡Œæ—¶é”å®šã€‚</p>

<p>æ„Ÿè°¢ Perl 6 çš„ä¼˜ç§€å¹¶å‘åŸè¯­ï¼Œå®ƒä¸å¿…ï¼å¦‚æœäº‹ä»¶å¤„ç†ç¨‹åºè¿”å› <a href="https://docs.perl6.org/type/Promise">Promise</a>ï¼Œåˆ™å®¢æˆ·ç«¯å¯¹è±¡å°†åœ¨ä¿ç•™(kept)æ—¶ä½¿ç”¨å…¶ <code>.result</code> ä½œä¸ºç­”å¤ã€‚è¿™æ„å‘³ç€ä¸ºäº†ä½¿æˆ‘ä»¬çš„é˜»å¡äº‹ä»¶å¤„ç†ç¨‹åºéé˜»å¡ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯å°†å®ƒçš„ä¸»ä½“å°è£…åœ¨ä¸€ä¸ª <code>start {...}</code> å—ä¸­ã€‚ä»€ä¹ˆå¯èƒ½æ›´ç®€å•ï¼Ÿ</p>

<p>ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªèƒ½å¤Ÿå“åº” <code>bash</code> å‘½ä»¤çš„æœºå™¨äººã€‚è¯¥æœºå™¨äººå°†è·å– <a href="http://bash.org/?random1">bash.org/?random1</a>ï¼Œä» HTML ä¸­è§£æå‡ºå¼•å·ï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜åœ¨ç¼“å­˜ä¸­ã€‚å½“å‘½ä»¤è¢«è§¦å‘æ—¶ï¼Œæœºå™¨äººä¼šå‘å‡ºå…¶ä¸­ä¸€ä¸ªå¼•å·ï¼Œå½“ç¼“å­˜ç”¨å®Œæ—¶é‡å¤æå–ã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æœºå™¨äººåœ¨æ£€ç´¢å’Œè§£æç½‘é¡µæ—¶é˜»å¡ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç ï¼š</p>

<pre><code class="language-perl6">use IRC::Client;
use Mojo::UserAgent:from&lt;Perl5&gt;;

class Bash {
    constant $BASH_URL = 'http://bash.org/?random1';
    constant $cache    = Channel.new;
    has        $!ua    = Mojo::UserAgent.new;

    multi method irc-to-me ($ where /bash/) {
        start $cache.poll or do { self!fetch-quotes; $cache.poll };
    }

    method !fetch-quotes {
        $cache.send: $_
            for $!ua.get($BASH_URL).res.dom.find('.qt').eachÂ».all_text.lines.join: '  ';
    }
}

.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#perl6&gt;
    :debug
    :plugins(Bash.new)
</code></pre>

<pre><code>&lt;Zoffix&gt; MahBot, bash
&lt;MahBot&gt; Zoffix, &lt;Time&gt; that reminds me of when Manning and I installed OS/2 Warp4 on a box and during the install routine it said something to the likes of 'join the hundreds of people on the internet'
</code></pre>

<p>å¯¹äºé¡µé¢æŠ“å–çš„éœ€æ±‚ï¼Œæˆ‘é€‰æ‹©äº† Perl 5 çš„ <a href="https://metacpan.org/pod/Mojo::UserAgent">Mojo::UserAgent</a>ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªå†…ç½®çš„ HTML è§£æå™¨ã€‚ <code>:from&lt;Perl5&gt;</code> å‰¯è¯å‘ç¼–è¯‘å™¨æŒ‡ç¤ºæˆ‘ä»¬è¦åŠ è½½ä¸€ä¸ª Perl 5 æ¨¡å—ï¼Œè€Œä¸æ˜¯ Perl 6 æ¨¡å—ã€‚</p>

<p>ç”±äºæˆ‘ä»¬æ˜¯å¤šçº¿ç¨‹çš„ï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ª <a href="https://docs.perl6.org/type/Channel">Channel</a> ä½œä¸ºçº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ç”¨äºç¼“å­˜ç›®çš„ã€‚æˆ‘ä»¬è®¢é˜…äº†æ–‡å­—åŒ…å«å•è¯ <code>bash</code> çš„ <code>irc-to-me</code> äº‹ä»¶ã€‚å½“è§¦å‘äº‹ä»¶å¤„ç†ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>start</code> å…³é”®å­—è·³å‡ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚ç„¶åï¼Œæˆ‘ä»¬è½®è®­(<code>.poll</code>)ç¼“å­˜å¹¶ä½¿ç”¨ç¼“å­˜çš„å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œå¦åˆ™ï¼Œé€»è¾‘å°†ç§»åŠ¨åˆ°è°ƒç”¨è¯»å–å¼•ç”¨ç§æœ‰æ–¹æ³•çš„ <code>do</code> å—ï¼Œå¹¶åœ¨å®Œæˆæ—¶å†æ¬¡è½®è¯¢ç¼“å­˜ï¼Œè·å¾—æ–°é²œå¼•ç”¨ã€‚æ‰€æœ‰çš„è¯´æ³•å’Œåšæ³•ï¼Œå¼•ç”¨å°†æ˜¯æˆ‘ä»¬ä»äº‹ä»¶å¤„ç†ç¨‹åºè¿”å›çš„ <code>Promise</code> çš„ç»“æœã€‚</p>

<p><code>fetch-quotes</code> æ–¹æ³•è§¦å‘æˆ‘ä»¬çš„ <code>Mojo::UserAgent</code> å¯¹è±¡ï¼Œå®ƒä»ç½‘ç«™è·å–éšæœºå¼•ç”¨é¡µé¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ <code>class=&quot;qt&quot;</code> çš„ HTML å…ƒç´  - è¿™äº›å…ƒç´ æ˜¯å¸¦å¼•å·çš„æ®µè½ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ hyper æ–¹æ³•è°ƒç”¨å°†è¿™äº›æ®µè½è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œå¹¶é€šè¿‡ <code>for</code> å¾ªç¯å°†æœ€ç»ˆåˆ—è¡¨æä¾›ç»™æˆ‘ä»¬çš„ <code>$cache Channel</code>ã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬çš„æœºå™¨äººæ— é˜»å¡åœ°è¿æ¥åˆ° IRC ä¸–ç•Œçš„å®¿ä¸»ã€‚å¹¶è°ˆåˆ°ä½ å¯èƒ½æƒ³è¦è¿‡æ»¤çš„ä¸œè¥¿&hellip;</p>

<h2 id="æ³¨æ„ä½ çš„è¨€è¡Œ">æ³¨æ„ä½ çš„è¨€è¡Œï¼</h2>

<p>æˆ‘ä»¬çš„æœºå™¨äººå°†å¾ˆå¿«è¢«ç¦æ­¢ï¼Œå¦‚æœå®ƒå‘é¢‘é“æŠ•å…¥å¤§é‡çš„ä¿¡æ¯ã€‚ä¸€ä¸ªæ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æˆ‘ä»¬çš„æ’ä»¶ä¸­åŒ…å«é€»è¾‘ï¼Œå¦‚æœè¾“å‡ºå¤ªå¤§ï¼Œä¼šä½¿ç”¨ pastebinã€‚ç„¶è€Œï¼Œå°†è¿™æ ·çš„ä¸œè¥¿æ·»åŠ åˆ°æˆ‘ä»¬ç¼–å†™çš„æ¯ä¸ªæ’ä»¶æ˜¯éå¸¸ä¸åˆ‡å®é™…çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œ<code>IRC::Client</code> æ”¯æŒè¿‡æ»¤å™¨ï¼</p>

<p>å¯¹äºä»»ä½•å‘å‡º <code>NOTICE</code> æˆ– <code>PRIVMSG</code> IRCå‘½ä»¤çš„æ–¹æ³•ï¼Œ<code>IRC::Client</code> éƒ½ä¼šé€šè¿‡ç»™å‡ºçš„ç±»ä¼ é€’è¾“å‡º <code>:filters</code> å±æ€§ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œæ— è®ºå®ƒæ¥è‡ªå“ªä¸ªæ’ä»¶ï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨ç²˜è´´å¤§å®¹é‡çš„è¾“å‡ºã€‚</p>

<p>æˆ‘ä»¬å°†é‡æ–°ä½¿ç”¨æˆ‘ä»¬çš„ bash.org å¼•ç”¨æœºå™¨äººï¼Œé™¤äº†è¿™æ¬¡å®ƒä¼šå°†å¤§é‡å¼•ç”¨ç²˜è´´åˆ° <a href="pastebin::Shadowcat">Shadowcat pastebin</a> ä¸­ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›ä»£ç ï¼</p>

<pre><code class="language-perl6">use IRC::Client;
use Pastebin::Shadowcat;
use Mojo::UserAgent:from&lt;Perl5&gt;;

class Bash {
    constant $BASH_URL = 'http://bash.org/?random1';
    constant $cache    = Channel.new;
    has        $!ua    = Mojo::UserAgent.new;

    multi method irc-to-me ($ where /bash/) {
        start $cache.poll or do { self!fetch-quotes; $cache.poll };
    }

    method !fetch-quotes {
        $cache.send: $_
            for $!ua.get($BASH_URL).res.dom.find('.qt').eachÂ».all_text;
    }
}

.run with IRC::Client.new:
    :nick&lt;MahBot&gt;
    :host&lt;irc.freenode.net&gt;
    :channels&lt;#zofbot&gt;
    :debug
    :plugins(Bash.new)
    :filters(
        -&gt; $text where .lines &gt; 1 || .chars &gt; 300 {
            Pastebin::Shadowcat.new.paste: $text.lines.join: &quot;\n&quot;;
        }
    )
</code></pre>

<pre><code>&lt;Zoffix&gt; MahBot, bash
&lt;MahBot&gt; Zoffix, &lt;intuit&gt; hmm maybe sumtime next week i will go outside'
&lt;Zoffix&gt; MahBot, bash
&lt;MahBot&gt; Zoffix, http://fpaste.scsys.co.uk/528741
</code></pre>

<p>å®Œæˆæ‰€æœ‰è¿‡æ»¤å·¥ä½œçš„ä»£ç å¾ˆå°ï¼Œå¾ˆå®¹æ˜“é”™è¿‡ - è¿™æ˜¯ä¸Šè¿°ç¨‹åºä¸­çš„æœ€å5è¡Œã€‚ <code>:filters</code> å±æ€§æ¥æ”¶ä¸€ä¸ª <a href="https://docs.perl6.org/type/Callable">Callables</a> åˆ—è¡¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªå°–å·å—ã€‚åœ¨å…¶ç­¾åä¸­ï¼Œæˆ‘ä»¬å°†æ–‡æœ¬é™åˆ¶ä¸ºè¶…è¿‡ 1 è¡Œæˆ–è¶…è¿‡ 300 ä¸ªå­—ç¬¦ï¼Œå› æ­¤åªæœ‰æ»¡è¶³è¿™äº›æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬çš„è¿‡æ»¤å™¨æ‰ä¼šè¿è¡Œã€‚åœ¨å—å†…éƒ¨ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨ <a href="https://modules.perl6.org/repo/Pastebin::Shadowcat">Pastebin::Shadowcat</a> æ¨¡å—å°†è¾“å‡ºæ”¾åˆ° pastebin ä¸­ã€‚å…¶ <code>.paste</code> æ–¹æ³•è¿”å›æ–°åˆ›å»ºçš„ç²˜è´´çš„ URLï¼Œè¿™æ˜¯æˆ‘ä»¬çš„è¿‡æ»¤å™¨å°†ç”¨å…¶æ›¿æ¢åŸå§‹å†…å®¹çš„ä¸œè¥¿ã€‚å¤ªæ£’äº†ï¼</p>

<h2 id="å®ƒåƒé»„æ²¹ä¸€æ ·ä¼ æ’­">å®ƒåƒé»„æ²¹ä¸€æ ·ä¼ æ’­</h2>

<p>åœ¨è¿‡å»ï¼Œå½“æˆ‘ä½¿ç”¨å…¶ä»– IRC å®¢æˆ·ç«¯å·¥å…·æ—¶ï¼Œæ¯å½“æœ‰äººè¦æ±‚æˆ‘å°†æœºå™¨äººæ”¾ç½®åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šæ—¶ï¼Œè¯¥è¿‡ç¨‹å¾ˆç®€å•ï¼šå°†ä»£ç å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•ï¼Œæ›´æ”¹é…ç½®å¹¶å®Œæˆã€‚å‡ ä¹æœ‰é“ç†çš„æ˜¯ï¼Œæ–°æœåŠ¡å™¨æ„å‘³ç€ä¸€ä¸ªâ€œæ–°â€ botï¼šä¸åŒçš„é¢‘é“ï¼Œä¸åŒçš„æ˜µç§°ç­‰ç­‰ã€‚</p>

<p>åœ¨ Perl 6 çš„ IRC::Client ä¸­ï¼Œæˆ‘å°è¯•é‡æ–°æƒ³è±¡ä¸€ä¸‹ï¼šæœåŠ¡å™¨ä»…ä»…æ˜¯æ¶ˆæ¯çš„å¦ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè¿˜æœ‰ä¸€ä¸ªé¢‘é“æˆ–æ˜µç§°ã€‚è¿™æ„å‘³ç€å°†æ‚¨çš„æœºå™¨äººè¿æ¥åˆ°å¤šä¸ªæœåŠ¡å™¨å°±å¦‚åŒé€šè¿‡ä»¥ä¸‹æ–¹å¼æ·»åŠ æ–°çš„æœåŠ¡å™¨é…ç½®ä¸€æ ·ç®€å•ï¼š</p>

<pre><code class="language-perl6">use IRC::Client;

class BFF {
    method irc-to-me ($ where /'â™¥'/) { 'I â™¥ YOU!' }
}

.run with IRC::Client.new:
    :debug
    :plugins(BFF)
    :nick&lt;MahBot&gt;
    :channels&lt;#zofbot&gt;
    :servers(
        freenode =&gt; %(
            :host&lt;irc.freenode.net&gt;,
        ),
        local =&gt; %(
            :nick&lt;P6Bot&gt;,
            :channels&lt;#zofbot #perl6&gt;,
            :host&lt;localhost&gt;,
        )
    )
</code></pre>

<pre><code>[on Freenode server]
&lt;ZoffixW&gt; MahBot, I â™¥ you
&lt;MahBot&gt; ZoffixW, I â™¥ YOU!

[on local server]
&lt;ZoffixW&gt; P6Bot, I â™¥ you
&lt;P6Bot&gt; ZoffixW, I â™¥ YOU!
</code></pre>

<p>é¦–å…ˆï¼Œæˆ‘ä»¬çš„æ’ä»¶æµ‘ç„¶ä¸çŸ¥å®ƒæ­£è¿è¡Œåœ¨å¤šå°æœåŠ¡å™¨ä¸Šã€‚å®ƒçš„å›å¤è¢«é‡å®šå‘åˆ°æ­£ç¡®çš„æœåŠ¡å™¨ï¼Œ<code>IRC::Client</code> ä»ç„¶ä»¥çº¿ç¨‹å®‰å…¨çš„æ–¹å¼æ‰§è¡Œå®ƒçš„æ–¹æ³•å¤„ç†ç¨‹åºã€‚</p>

<p>åœ¨ <code>IRC::Client</code> çš„æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ¥æ”¶ <code>Hash</code> çš„ <code>:servers</code> å±æ€§ã€‚æ­¤ <code>Hash</code> çš„é”®æ˜¯æœåŠ¡å™¨çš„æ ‡ç­¾ï¼Œå€¼æ˜¯æœåŠ¡å™¨ç‰¹å®šçš„é…ç½®ï¼Œå¯è¦†ç›–å…¨å±€è®¾ç½®ã€‚å› æ­¤ï¼Œ<code>freenode</code> æœåŠ¡å™¨ä»æˆ‘ä»¬æä¾›ç»™ <code>IRC::Client</code> çš„ <code>:nick</code> å’Œ <code>:channels</code> å±æ€§è·å–å®ƒçš„ <code>:nick</code> å’Œ <code>:channels</code>ï¼Œè€Œ <code>local</code> æœåŠ¡å™¨ä½¿ç”¨å®ƒè‡ªå·±çš„å€¼è¦†ç›–é‚£äº›ã€‚</p>

<p>è°ƒè¯•è¾“å‡ºç°åœ¨å·²ç»æ‰“å°äº†æœåŠ¡å™¨æ ‡ç­¾ï¼Œä»¥æŒ‡ç¤ºè¯¥äº‹ä»¶åº”ç”¨äºäºå“ªä¸ªæœåŠ¡å™¨ï¼š</p>

<p><img src="https://rakudo.party/assets/pics/irc-bot/debug-output3.png" alt="img" /></p>

<p>æ‰€ä»¥ï¼Œåªæ˜¯å‘Šè¯‰æœºå™¨äººè¿æ¥åˆ°å¦ä¸€å°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä½¿å®ƒæˆä¸ºå¤šæœåŠ¡å™¨ï¼Œè€Œä¸å¯¹æˆ‘ä»¬çš„æ’ä»¶åšä»»ä½•æ”¹å˜ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æƒ³è¦ä¸ç‰¹å®šçš„æœåŠ¡å™¨äº¤è°ˆæ—¶ï¼Œæˆ‘ä»¬ä¼šåšä»€ä¹ˆï¼Ÿ</p>

<h2 id="å‘é€å®ƒçš„æ–¹å¼">å‘é€å®ƒçš„æ–¹å¼</h2>

<p>å½“ bot æ˜¯ <code>.run</code> æ—¶ï¼Œå®¢æˆ·ç«¯å¯¹è±¡å°† <code>:servers</code> å±æ€§çš„å€¼æ›´æ”¹ä¸º <code>IRC::Client::Server</code> å¯¹è±¡ã€‚é‚£äº›å°†å®ƒä»¬ä¸²è”åˆ°å®ƒä»¬æ‰€ä»£è¡¨çš„æœåŠ¡å™¨çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥ä» Message Object çš„ <code>.server</code> å±æ€§æˆ– Client Object çš„ <code>.servers</code> hash å±æ€§ä¸­è·å–å®ƒä»¬ã€‚å®¢æˆ·ç«¯å¯¹è±¡æ–¹æ³•ï¼ˆå¦‚ <code>.send</code> æˆ– <code>.join</code>ï¼‰é‡‡ç”¨å¯é€‰çš„æœåŠ¡å™¨å±æ€§æ¥æ§åˆ¶æ¶ˆæ¯å°†è¢«å‘é€åˆ°å“ªä¸ªæœåŠ¡å™¨ï¼Œå¹¶ä¸”ç¼ºçœå€¼ä¸º <code>*</code>ï¼Œè¿™æ„å‘³ç€å‘é€åˆ°æ¯ä¸ªæœåŠ¡å™¨ã€‚</p>

<p>è¿™æ˜¯ä¸€ä¸ªè¿æ¥åˆ°ä¸¤å°æœåŠ¡å™¨å¹¶åŠ å…¥å¤šä¸ªé¢‘é“çš„ botã€‚æ¯å½“å®ƒçœ‹åˆ°ä¸€æ¡é¢‘é“æ¶ˆæ¯æ—¶ï¼Œå®ƒå°±ä¼šå°†å®ƒè½¬å‘åˆ°æ‰€æœ‰å…¶ä»–é¢‘é“ï¼Œå¹¶åœ¨ç”± <code>local</code> æ ‡ç­¾æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šå‘ç”¨æˆ· <code>Zoffix</code> å‘é€ç§ä¿¡ã€‚</p>

<pre><code class="language-perl6">use IRC::Client;

class Messenger does IRC::Client::Plugin {
    method irc-privmsg-channel ($e) {
        for $.irc.servers.values -&gt; $server {
            for $server.channels -&gt; $channel {
                next if $server eq $e.server and $channel eq $e.channel;

                $.irc.send: :$server, :where($channel), :text(
                    &quot;$e.nick() over at $e.server.host()/$e.channel() says $e.text()&quot;
                );
            }
        }

        $.irc.send: :where&lt;Zoffix&gt;
                    :text('I spread the messages!')
                    :server&lt;local&gt;;
    }
}

.run with IRC::Client.new:
    :debug
    :plugins[Messenger.new]
    :nick&lt;MahBot&gt;
    :channels&lt;#zofbot&gt;
    :servers{
        freenode =&gt; %(
            :host&lt;irc.freenode.net&gt;,
        ),
        local =&gt; %(
            :nick&lt;P6Bot&gt;,
            :channels&lt;#zofbot #perl6&gt;,
            :host&lt;localhost&gt;,
        )
    }
</code></pre>

<pre><code>[on Freenode server/#zofbot]
&lt;ZoffixW&gt; Yey!
[on local server/#zofbot]
&lt;P6Bot&gt; ZoffixW over at irc.freenode.net/#zofbot says Yey!
[on local server/#perl6]
&lt;P6Bot&gt; ZoffixW over at irc.freenode.net/#zofbot says Yey!
[on local server/ZoffixW private message queue]
&lt;P6Bot&gt; I spread the messages!
</code></pre>

<p>æˆ‘ä»¬è®¢é˜… <code>irc-privmsg</code> é¢‘é“äº‹ä»¶ï¼Œå½“å®ƒè¢«è§¦å‘æ—¶ï¼Œæˆ‘ä»¬éå†æ‰€æœ‰çš„æœåŠ¡å™¨ã€‚å¯¹äºæ¯ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘ä»¬éå†æ‰€æœ‰è¿æ¥çš„é¢‘é“ï¼Œå¹¶ä½¿ç”¨ <code>$.irc.send</code> æ–¹æ³•å‘è¯¥ç‰¹å®šé¢‘é“å’ŒæœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼Œé™¤éæœåŠ¡å™¨å’Œé¢‘é“ä¸æ¶ˆæ¯æ¥æºç›¸åŒã€‚</p>

<p>æ¶ˆæ¯æœ¬èº«åœ¨æ¶ˆæ¯å¯¹è±¡ä¸Šè°ƒç”¨ <code>.nick</code>ï¼Œ<code>.channel</code>å’Œ <code>.server.host</code> æ–¹æ³•æ¥æ ‡è¯†æ¶ˆæ¯çš„å‘é€è€…å’Œæ¥æºã€‚</p>

<h2 id="ç»“è®º">ç»“è®º</h2>

<p>Perl 6 æä¾›äº†å¼ºå¤§çš„å¹¶å‘åŸè¯­ï¼Œè°ƒåº¦æ–¹æ³•å’Œè‡ªçœåŠŸèƒ½ï¼Œä½¿æ‚¨å¯ä»¥æ„å»ºå‡ºä»¤äººæƒŠå¹çš„éé˜»å¡ï¼ŒåŸºäºäº‹ä»¶çš„æ¥å£ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ <code>IRC::Client</code>ï¼Œå¯è®©æ‚¨ä½¿ç”¨ IRC ç½‘ç»œã€‚å®ƒåœ¨è¿™é‡Œã€‚å‡†å¤‡å¥½äº†ã€‚ç”¨å®ƒå§ï¼</p>


        
          <div class="blog-tags">
            
              <a href="https://ohmysummer.github.io//tags/perl-6/">Perl 6</a>&nbsp;
            
              <a href="https://ohmysummer.github.io//tags/irc/">IRC</a>&nbsp;
            
          </div>
        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://ohmysummer.github.io/post/2018-04-16-cro-http-client/" data-toggle="tooltip" data-placement="top" title="Cro::HTTP::Client">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://ohmysummer.github.io/post/2018-05-05-datetime/" data-toggle="tooltip" data-placement="top" title="DateTime">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ohmysummer" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            
            <a href="https://ohmysummer.github.io/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="https://ohmysummer.github.io/">ç„‰çŸ¥éé±¼</a>
            
          

          <span style="color: red;">â¤</span>&nbsp;Perl 6
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.53</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://ohmysummer.github.io/js/main.js"></script>
<script src="https://ohmysummer.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://ohmysummer.github.io/js/load-photoswipe.js"></script>


<script>
  (function() {
    var cx = '009072066163920799339:qwme9vkotxk';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>





  </body>
</html>

